# Story 2.6: Live Preview Screen

**Status:** Ready for Review

---

## Story

**As a** user,
**I want** to preview my profile website and card design before payment,
**so that** I can confirm everything looks correct.

## Acceptance Criteria

1. ✅ Preview screen shows split view: left = website profile preview, right = card design preview
2. ✅ Website preview renders profile data with selected theme (component preview)
3. ✅ Card preview shows mockup with user's name, title, QR code placeholder
4. ✅ Preview is interactive: can scroll website preview
5. ✅ "Edit" button returns to previous wizard steps
6. ✅ Mobile view: stacked layout (website preview on top, card preview below)
7. ✅ Data pulled from Zustand wizard state
8. ✅ Toggle to switch between desktop/mobile preview for website
9. ✅ "Proceed to Payment" button enabled when user confirms preview
10. ✅ Warning message if required fields missing

---

## Tasks / Subtasks

- [x] Task 1: Create PreviewStep Component (AC: 1-4, 6-8)
  - [x] Create PreviewStep.jsx with split view layout
  - [x] Desktop/mobile toggle buttons
  - [x] Website profile preview with theme styling
  - [x] Business card mockup preview
  - [x] Pull data from Zustand store
  - [x] Responsive grid layout (2 cols desktop, 1 col mobile)

- [x] Task 2: Edit Navigation (AC: 5)
  - [x] Add edit buttons for each step
  - [x] Implement setCurrentStep navigation
  - [x] Grid layout for edit buttons

- [x] Task 3: Confirmation Flow (AC: 9, 10)
  - [x] Required data validation check
  - [x] Warning message for missing fields
  - [x] Confirmation checkbox
  - [x] "Proceed to Payment" button (disabled until confirmed)

- [x] Task 4: Integrate into Wizard (AC: All)
  - [x] Update WizardLayout to support 5 steps
  - [x] Update wizardStore to allow step 5
  - [x] Add PreviewStep to CreateProfileWizard
  - [x] Update step indicator (Step 5 of 5)

---

## Dev Notes

### Implementation Details

**PreviewStep Component:**
- Split view with website preview (left) and card preview (right)
- Desktop/mobile toggle for responsive preview testing
- Website preview dynamically styled with selected theme colors
- Card preview mockup with primary theme color background
- Avatar display or initial fallback
- Work experience formatted with date-fns
- Social links rendered as buttons with platform icons
- QR code placeholder in card preview

**Edit Navigation:**
- 4 edit buttons for quick step access
- Uses `setCurrentStep()` from store
- Allows jumping back to any previous step

**Validation & Confirmation:**
- Checks required fields: fullName, title, email, phone, workExperiences, selectedTheme
- Shows warning banner if data missing
- Confirmation checkbox required before proceeding
- "Proceed to Payment" button only enabled when confirmed + data complete

**Wizard Integration:**
- WizardLayout now shows 5 steps
- Step 5 = "Preview"
- Progress indicator updated to "Step X of 5"
- Store supports currentStep 1-5

### File Structure
```
frontend/src/
├── components/
│   └── wizard/
│       ├── PreviewStep.jsx (NEW - preview & confirmation)
│       └── WizardLayout.jsx (modified - 5 steps)
├── store/
│   └── wizardStore.js (modified - support step 5)
└── pages/
    └── CreateProfileWizard.jsx (modified - add PreviewStep)
```

### Dependencies
- react-icons (FaDesktop, FaMobileAlt, FaEdit, FaCheckCircle)
- date-fns (format dates in work experience)
- Zustand store (all wizard data)

---

## Testing

### Manual Testing Steps
1. Complete Steps 1-4 with valid data
2. Navigate to Step 5 (Preview)
3. Verify website preview displays all data correctly
4. Verify card preview shows name, title, avatar, QR placeholder
5. Click "Desktop" toggle - verify wide layout
6. Click "Mobile" toggle - verify narrow layout
7. Test edit buttons - each navigates to correct step
8. Return to Preview step
9. Check confirmation checkbox
10. Click "Proceed to Payment" - should proceed (placeholder for now)
11. Test with missing data - verify warning appears
12. Verify "Proceed to Payment" disabled without confirmation

---

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4.5

### Debug Log References
N/A

### Completion Notes
- Full implementation of Story 2.6 complete
- All acceptance criteria met
- Interactive preview with desktop/mobile toggle
- Edit navigation for all previous steps
- Confirmation flow with validation
- Story 2.6 Ready for Review

### File List
- frontend/src/components/wizard/PreviewStep.jsx (created)
- frontend/src/components/wizard/WizardLayout.jsx (modified - 5 steps)
- frontend/src/store/wizardStore.js (modified - step 5 support)
- frontend/src/pages/CreateProfileWizard.jsx (modified - added PreviewStep)
- docs/stories/2.6.live-preview-screen.md (created)

### Change Log
1. Created PreviewStep component with split view layout
2. Implemented desktop/mobile preview toggle
3. Built website preview with theme styling
4. Created business card mockup preview
5. Added edit navigation buttons for all steps
6. Implemented confirmation checkbox flow
7. Added validation warning for missing required data
8. Updated WizardLayout to support 5 steps
9. Updated wizardStore to allow step 5
10. Integrated PreviewStep into CreateProfileWizard

### Status
Story 2.6 implementation complete. Ready for manual testing with `npm run dev`.

**Next Story:** Story 2.7 - Payment Integration with VNPay