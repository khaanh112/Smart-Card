# Story 2.5: Theme Selection Gallery

**Status:** Ready for Review

## Story

**As a** user,
**I want** to browse và select a theme cho my profile website,
**so that** my profile matches my personal style.

## Acceptance Criteria

1. ✅ GET /api/v1/themes endpoint returns available themes từ database
2. ✅ Frontend displays theme gallery in grid layout (responsive: 1 col mobile, 2-3 cols desktop)
3. ✅ Each theme card shows: thumbnail image, theme name, "Select" button
4. ✅ Clicking theme card shows larger preview modal với sample profile
5. ✅ Selected theme highlighted với border/checkmark
6. ✅ Can switch theme selection before proceeding
7. ✅ Theme selection stored trong wizard state
8. ✅ "Back" returns to social links step
9. ✅ "Next" proceeds to preview screen với selected theme applied

## Tasks / Subtasks

- [x] Task 1: Backend - Theme controller and routes (AC: 1)
  - [x] Create theme.controller.js
  - [x] getAllThemes handler
  - [x] Create theme.routes.js
  - [x] GET /api/v1/themes endpoint
- [x] Task 2: Frontend - Theme Selection Step (AC: 2, 3, 5, 6, 7, 8, 9)
  - [x] Create ThemeSelectionStep.jsx
  - [x] Fetch themes from API
  - [x] Grid layout (responsive)
  - [x] Theme cards with thumbnail and name
  - [x] Selection state management
  - [x] Highlight selected theme
  - [x] Back/Next navigation
- [x] Task 3: Theme Preview Modal (AC: 4)
  - [x] Modal with larger preview
  - [x] Sample profile data display
  - [x] Select button in modal
- [x] Task 4: Integration
  - [x] Update CreateProfileWizard with Step 4
  - [x] Add theme routes to backend index.js
  - [x] Update Zustand store theme selection

## Dev Notes

### Implementation Details
- Themes fetched from database via Prisma
- Theme thumbnails stored as URLs
- Each theme has: id, name, description, thumbnailUrl, primaryColor, secondaryColor
- Preview modal shows theme styling applied to sample content
- Theme selection persists to Zustand store
- Can change selection multiple times before proceeding

### Technical Decisions
- Use existing Theme model from database
- Thumbnail images can be placeholder or actual screenshots
- Preview modal uses theme colors for demonstration
- Grid uses Tailwind responsive classes
- Selected theme stored by ID in Zustand

## Testing

### Manual Testing Steps
1. Complete Steps 1-3
2. Reach Step 4 (Theme Selection)
3. See grid of available themes
4. Click theme card - see preview modal
5. Click "Select" - theme highlighted
6. Try selecting different theme
7. Click "Back" - returns to Step 3
8. Click "Next" - proceeds with selected theme

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4.5

### Completion Notes
- Theme selection implementation complete
- Backend endpoint fetches themes from database
- Frontend displays responsive grid
- Preview modal functional
- Selection state managed in Zustand
- Ready for Step 5 integration

### File List
- backend/src/controllers/theme.controller.js (created)
- backend/src/routes/theme.routes.js (created)
- backend/src/index.js (modified - added theme routes)
- frontend/src/components/wizard/ThemeSelectionStep.jsx (created)
- frontend/src/pages/CreateProfileWizard.jsx (modified - added Step 4)
- docs/stories/2.5.theme-selection.md (created)

### Change Log
1. Created theme controller with getAllThemes handler
2. Created theme routes with GET /api/v1/themes
3. Built ThemeSelectionStep component with grid layout
4. Implemented theme preview modal
5. Added theme selection highlighting
6. Integrated with Zustand store
7. Added to CreateProfileWizard
8. Backend serves theme data from database