# Story 1.8: User Registration & Login Forms

**Status:** Ready for Review

---

## Story

**As a** visitor,
**I want** to register and login through intuitive forms,
**so that** I can access the platform and create my profile.

## Acceptance Criteria

1. ✅ Login page at `/login` with email/password fields
2. ✅ Register page at `/register` with full name, email, password, confirm password
3. ✅ Form validation: required fields, email format, password strength
4. ✅ "Sign in with Google" button redirects to Google OAuth
5. ✅ Successful login saves JWT tokens to localStorage
6. ✅ Error messages displayed for failed authentication
7. ✅ Password strength indicator on register form
8. ✅ "Remember me" checkbox on login form
9. ✅ Links between login/register pages
10. ✅ Responsive design for mobile devices

---

## Tasks / Subtasks

- [x] Task 1: Login Page (AC: 1, 4, 5, 6, 8)
  - [x] Create LoginPage.jsx
  - [x] Email and password input fields with icons
  - [x] Form validation
  - [x] Submit handler calling POST /api/v1/auth/login
  - [x] Save tokens to localStorage on success
  - [x] Error message display
  - [x] "Sign in with Google" button
  - [x] "Remember me" checkbox
  - [x] Link to register page

- [x] Task 2: Register Page (AC: 2, 3, 4, 5, 6, 7)
  - [x] Create RegisterPage.jsx
  - [x] Full name, email, password, confirm password fields
  - [x] Form validation (email format, password length, password match)
  - [x] Password strength indicator (weak/medium/strong)
  - [x] Submit handler calling POST /api/v1/auth/register
  - [x] Save tokens to localStorage on success
  - [x] Error message display
  - [x] "Sign up with Google" button
  - [x] Terms of service checkbox
  - [x] Link to login page

- [x] Task 3: OAuth Callback Handler (AC: 4, 5)
  - [x] Create AuthCallback.jsx
  - [x] Parse tokens from URL query params
  - [x] Save tokens to localStorage
  - [x] Redirect to home/dashboard
  - [x] Error handling

- [x] Task 4: Integration (AC: All)
  - [x] Add routes to App.jsx (/login, /register, /auth/callback)
  - [x] Update HomePage with Sign In/Get Started buttons
  - [x] Add features section to HomePage
  - [x] Responsive styling with Tailwind CSS

---

## Dev Notes

### Implementation Details

**LoginPage:**
- Email/password authentication with backend API
- Google OAuth redirect to backend endpoint
- Stores accessToken, refreshToken, and user data in localStorage
- Form validation with visual feedback
- Loading states during authentication
- Error display with user-friendly messages
- Remember me checkbox (UI only, backend needed for full implementation)

**RegisterPage:**
- Full registration form with all required fields
- Real-time password strength indicator
- Password confirmation validation
- Terms of service checkbox (required)
- Same OAuth and storage logic as login
- Redirects to /create-profile after successful registration

**AuthCallback:**
- Handles Google OAuth callback
- Extracts tokens from URL query parameters
- Parses user data from URL
- Handles authentication errors
- Redirects appropriately after processing

**Security Considerations:**
- Tokens stored in localStorage (consider httpOnly cookies for production)
- HTTPS required for production
- CORS configured on backend
- Input sanitization on backend

### File Structure
```
frontend/src/
├── pages/
│   ├── LoginPage.jsx (NEW - email/password login)
│   ├── RegisterPage.jsx (NEW - registration form)
│   └── AuthCallback.jsx (NEW - OAuth callback handler)
└── App.jsx (modified - added auth routes)
```

### Dependencies
- react-router-dom - routing and navigation
- axios - HTTP requests
- react-icons - UI icons (FaEnvelope, FaLock, FaGoogle, etc.)
- Tailwind CSS - styling

---

## Testing

### Manual Testing Steps

**Login Flow:**
1. Navigate to http://localhost:5173/login
2. Test validation:
   - Try submitting empty form
   - Enter invalid email format
   - Enter short password
3. Test login with valid credentials:
   - Email: testuser@example.com
   - Password: Test1234
4. Verify tokens saved in localStorage (DevTools → Application → Local Storage)
5. Verify redirect to homepage
6. Test "Sign in with Google" button (requires Google OAuth setup)

**Register Flow:**
1. Navigate to http://localhost:5173/register
2. Test validation:
   - Try submitting empty form
   - Enter mismatched passwords
   - Test password strength indicator (type 6, 10, 15 chars)
3. Register new user with valid data
4. Verify tokens saved in localStorage
5. Verify redirect to create profile page
6. Test "Sign up with Google" button

**OAuth Flow:**
1. Click "Sign in with Google" on login page
2. Should redirect to Google login
3. After Google auth, redirects to /auth/callback
4. Callback processes tokens and redirects to home
5. Verify tokens in localStorage

**Error Handling:**
1. Test login with wrong password → shows error message
2. Test login with non-existent email → shows error message
3. Test register with existing email → shows error message
4. Test network error → shows error message

---

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4.5

### Debug Log References
N/A

### Completion Notes
- Full implementation of Story 1.8 complete
- All acceptance criteria met
- Login and register pages fully functional
- Google OAuth integration ready
- Token management implemented
- Responsive design for all devices
- Error handling and validation complete

### File List
- frontend/src/pages/LoginPage.jsx (created)
- frontend/src/pages/RegisterPage.jsx (created)
- frontend/src/pages/AuthCallback.jsx (created)
- frontend/src/App.jsx (modified - added auth routes and updated HomePage)
- docs/stories/1.8.user-registration-login-forms.md (created)

### Change Log
1. Created LoginPage with email/password authentication
2. Added Google OAuth button to login page
3. Created RegisterPage with full registration form
4. Implemented password strength indicator
5. Created AuthCallback handler for OAuth redirects
6. Added auth routes to App.jsx (/login, /register, /auth/callback)
7. Updated HomePage with Sign In and Get Started buttons
8. Added features section to HomePage
9. Implemented token storage in localStorage
10. Added error handling and validation throughout

### Status
Story 1.8 implementation complete. Ready for manual testing.

**Test Credentials (from seed data):**
- Email: testuser@example.com
- Password: Test1234

**Access the pages:**
- Login: http://localhost:5173/login
- Register: http://localhost:5173/register
- Home: http://localhost:5173/